; Test 17: Bitwise OR Expressions
; Tests the parser's ability to parse bitwise OR expressions.
; Bitwise OR operator: | (inclusive OR) - LOWEST precedence binary operator

.org 0x2000

; Simple bitwise OR
test_bitwise_or:
    ld d0, 0x00 | 0x00          ; 0x00
    ld d0, 0xFF | 0x00          ; 0xFF
    ld d0, 0x00 | 0xFF          ; 0xFF
    ld d0, 0xF0 | 0x0F          ; 0xFF
    ld d0, 0xAA | 0x55          ; 0xFF

; Chained bitwise OR (left-associative)
test_chained_or:
    ld d0, 0x01 | 0x02 | 0x04   ; (0x01 | 0x02) | 0x04 = 0x03 | 0x04 = 0x07
    ld d0, 0x10 | 0x20 | 0x40 | 0x80 ; 0xF0

; OR with grouped expressions
test_grouped_or:
    ld d0, (0xF0 | 0x0F)
    ld d0, (0x01 | 0x02) | 0x04
    ld d0, 0x01 | (0x02 | 0x04)

; OR has lower precedence than XOR
; 0xF0 | 0x0F ^ 0xFF parses as 0xF0 | (0x0F ^ 0xFF) = 0xF0 | 0xF0 = 0xF0
test_precedence_xor:
    ld d0, 0xF0 | 0x0F ^ 0xFF   ; 0xF0 | (0x0F ^ 0xFF) = 0xF0 | 0xF0 = 0xF0
    ld d0, 0x0F ^ 0xFF | 0xF0   ; (0x0F ^ 0xFF) | 0xF0 = 0xF0 | 0xF0 = 0xF0

; OR has lower precedence than AND
test_precedence_and:
    ld d0, 0x10 | 0xFF & 0x0F   ; 0x10 | (0xFF & 0x0F) = 0x10 | 0x0F = 0x1F
    ld d0, 0xFF & 0xF0 | 0x0F   ; (0xFF & 0xF0) | 0x0F = 0xF0 | 0x0F = 0xFF

; Combining flags/bits pattern
test_combine_bits:
    ld d0, 0x01 | 0x02 | 0x04 | 0x08     ; Combine individual bits
    ld d0, 0x00 | 1 << 0 | 1 << 1 | 1 << 2 ; Build using shifts

; Data with bitwise OR expressions
.org 0x80000000
or_data:
.byte 0xF0 | 0x0F, 0xAA | 0x55
.word 0xFF00 | 0x00FF, 0xF0F0 | 0x0F0F
.dword 0xFFFF0000 | 0x0000FFFF, 0xDEAD0000 | 0x0000BEEF
